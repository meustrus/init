#!/bin/sh

if [ "$#" -ne 2 ]; then
    printf "Usage: append \"line to append\" \"file to append to\"\n"
    exit 2
fi

if ! [ -f "$2" ] || ! grep -qxF "$1" "$2" 2>/dev/null ; then
    ${SUDO_USER:+sudo -u "$SUDO_USER" env "PATH=$PATH"} touch "$2"
    ${SUDO_USER:+sudo -u "$SUDO_USER" env "PATH=$PATH"} sh -c "printf \"\\n\\n%s\\n\" '$1' >> \"$2\""
fi
