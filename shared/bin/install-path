#!/bin/sh

. "${INIT_REPO:-$(dirname "$0")/../..}/vars.sh"

NewPaths=

for NewPath in "$@"; do
    if [ -n "$NewPath" ]; then
        mkdir -p "$NewPath"
        NewPath=$(cd "$(dirname "$NewPath")" && pwd)/$(basename "$NewPath")
        PATH="$NewPath:$PATH" export PATH
        NewPaths=${NewPaths:+$NewPaths:}$NewPath
    else
        printf 'ERROR: Tried to install-path with an empty argument\n'
    fi
done

if ! test -f "$BENCH/.env.sh"; then
    printf '#!/bin/sh\n\n' > "$BENCH/.env.sh"
fi

append ". '$BENCH/.env.sh'" "$HOME/.profile"
append ". '$BENCH/.env.sh'" "$HOME/.bash_profile"
append ". '$BENCH/.env.sh'" "$HOME/.zshenv"

test -n "$(tail -c1 "$BENCH/.env.sh")" && printf '\n' >> "$BENCH/.env.sh"
printf 'PATH="%s:$PATH" export PATH\n' "$NewPaths" >> "$BENCH/.env.sh"
